## Автоматизация администрирования. Ansible.

При запуске виртуальной машины при помощи сценария ansible с использованием роли - [playbooks/nginx.yml](playbooks/nginx.yml)
разворачивается nginx, который слушает порт 8080, сервис nginx переводится в режим enabled и меняется стартовая страница.  

При старте получаем:  
```console
    centos7: Running ansible-playbook...

PLAY [Install nginx on staging servers] ****************************************

TASK [Gathering Facts] *********************************************************
ok: [centos7]

TASK [nginx : Install EPEL Repo package from standart repo] ********************
changed: [centos7]

TASK [nginx : Install nginx package from epel repo] ****************************
changed: [centos7]

TASK [nginx : Change standart html file from template] *************************
changed: [centos7]

TASK [nginx : Create nginx config from template] *******************************
changed: [centos7]

RUNNING HANDLER [nginx : restart nginx] ****************************************
changed: [centos7]

PLAY RECAP *********************************************************************
centos7                    : ok=6    changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
```
Видим что сервис в режиме enabled в systemd:  
```console
root@centos7 ~]# systemctl status nginx.service 
● nginx.service - The nginx HTTP and reverse proxy server
   Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; vendor preset: disabled)
   Active: active (running) since Sun 2019-09-08 22:04:26 UTC; 18min ago
  Process: 6419 ExecStart=/usr/sbin/nginx (code=exited, status=0/SUCCESS)
  Process: 6416 ExecStartPre=/usr/sbin/nginx -t (code=exited, status=0/SUCCESS)
  Process: 6415 ExecStartPre=/usr/bin/rm -f /run/nginx.pid (code=exited, status=0/SUCCESS)
 Main PID: 6421 (nginx)
   CGroup: /system.slice/nginx.service
           ├─6421 nginx: master process /usr/sbin/nginx
           └─6422 nginx: worker process

Sep 08 22:04:26 centos7 systemd[1]: Starting The nginx HTTP and reverse proxy server...
Sep 08 22:04:26 centos7 nginx[6416]: nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
Sep 08 22:04:26 centos7 nginx[6416]: nginx: configuration file /etc/nginx/nginx.conf test is successful
Sep 08 22:04:26 centos7 systemd[1]: Failed to read PID from file /run/nginx.pid: Invalid argument
Sep 08 22:04:26 centos7 systemd[1]: Started The nginx HTTP and reverse proxy server.
```

И можем обратится на порт 8080:  
```console
[ross@lenovo 09homework]$ curl 192.168.11.101:8080
# This file generated by Ansible
# Ansible managed

Hello from RedHat
```
